<div id="drafts-index" class="app-page bottom-fixed-navbar-container">
    
    <div>
        <div class="col-md-4 col-lg-3">
            <ul data-bind="foreach: drafts" class="data-list">
                <li data-bind="css: { active: $data === $parent.selectedDraft() }, click: $parent.selectDraft">
                    <div class="pull-right">
                        <span data-bind="text: $parent.formatDate($data.Modified().At())"></span>
                    </div>
                    <span data-bind="text: Name"></span>
                </li>
            </ul>
        </div>
        <div class="col-md-8 col-lg-9 draft-preview">
            <!-- ko if: selectedDraft() && template() -->
            <!-- ko template: 'DraftPreviewTemplate' --><!-- /ko -->
            <!-- /ko -->
        </div>
    </div>
        
    <div class="navbar navbar-default navbar-fixed-bottom">        
        <div class="navbar-panel pull-left">
            <ul class="nav navbar-nav">
                <li>
                    <a href="#" data-bind="click:addDraft"><span><i class="fa fa-plus fa-fw"></i> Neuer Entwurf</span></a>
                </li>
                <li data-bind="visible: selectedDraft()">
                    <a href="#" data-bind="click:editSelectedDraft"><span><i class="fa fa-edit fa-fw"></i> Entwurf Bearbeiten</span></a>
                </li>
            </ul>
        </div>
    </div>
</div>

<script type="text/html" id="CT_HTML">
    <div data-bind="html: $parents[1].getContent($data)"></div>
</script>

<script type="text/html" id="CT_MARKDOWN">
    <div data-bind="markdown: $parents[1].getContent($data)"></div>
</script>

<script type="text/html" id="CT_TEXT">
    <pre data-bind="text: $parents[1].getContent($data)"></pre>
</script>

<script type="text/html" id="DraftPreviewTemplate">
    <div class="row">
        <div class="col-md-12">
            <p data-bind="with: selectedDraft()">
                <span data-bind="text: Name"></span> Version <span data-bind="text: Version" />
                <br />Erstellt von: <span data-bind="text: Created().By"></span> <span data-bind="text: $parent.moment.utc(Created().At()).fromNow(), attr: { title: $parent.moment.utc(Created().At()).format('LLLL') }"></span>
                <br />Letzte Änderung: <span data-bind="text: Modified().By"></span> <span data-bind="text: $parent.moment.utc(Modified().At()).fromNow(), attr: { title: $parent.moment.utc(Modified().At()).format('LLLL') }"></span>
            </p>
        </div>
    </div>
    <!-- ko foreach: { data: template().rows, as: 'row' } -->
    <div class="row">
        <!-- ko foreach: { data:row.cells, as: 'cell' } -->
        <div data-bind="draftTemplateClass: cell, click: $parents[1].editContentPart">
            <div data-bind="template: { name: $parents[1].getContentPartTemplate($data) }" class="template-preview-cell"></div>
        </div>
        <!-- /ko -->
    </div>
    <!-- /ko -->
    <div class="row" data-bind="with: selectedDraft()">
        <div class="col-md-12">
            <ul data-bind="foreach: Files()">
                <li>
                    <span data-bind="text: Name" />
                </li>
            </ul>
        </div>
    </div>
</script>