<div id="user-detail" class="app-page bottom-fixed-navbar-container">
    
    <div class="container-fluid">
        <h2><span data-bind="text: user().fullName"></span> <small>Benutzerdetails</small></h2>         
        <div class="alert" data-bind="visible: user().isEffectivelyLockedOut">
            <strong>Gesperrt </strong> Der Benutzer wurde <span data-bind="text: moment.utc(user().lastLockoutDate()).fromNow(), attr: { title: moment(user().lastLockoutDate()).format('LLLL') }"></span> aufgrund zu vieler ungültiger Anmelde-Versuche gesperrt.
            Die Sperrung wird nach <!-- ko text: authentication.metadata.lockoutPeriod --><!-- /ko --> Minuten automatisch aufgehoben.
        </div>
        <div class="alert" data-bind="visible: user().isOnline">
            <strong>Online </strong> <span data-bind="text: user().firstName"></span> ist derzeit online.
        </div>
    </div>

    <div class="container-fluid">
        
        <div class="well well-small">
            <div class="row-fluid">
                <div class="span6">
                    <p>Email: <a data-bind="text: user().email, attr: { href: 'mailto:' + user().email() }"></a></p>
                    <p data-bind="visible: user().hasPhone">Telefon: <a data-bind="text: user().phone, attr: { href: 'tel:' + user().phone() }"></a></p>
                    <p>Benutzername: <span data-bind="text: user().userName"></span></p>
                    <p data-bind="visible: user().roles().length">Rollen: <em><!-- ko foreach: user().roles --><span data-bind="text: $data + (($index < $parent.user().roles().length) ? ', ' : '')"></span><!-- /ko --></em></p>                                    
                </div>
                <div class="span6">
                    <p>Erstellt: <span data-bind="attr: { title: moment(user().creationDate()).format('LLLL') }, text: moment(user().creationDate()).fromNow(), textTimeout: { interval: 30000, observable: user().creationDate }"></span></p>      
                    <p data-bind="visible: user().hasEverLoggedIn">Letzte Anmeldung: <em data-bind="attr: { title: moment(user().lastLoginDate()).format('LLLL') }, text: user().lastLoginDateFormatted(), textTimeout: { interval: 30000, observable: user().lastLoginDate }"></em></p>  
                    <p data-bind="visible: user().hasEverLoggedIn">Zuletzt aktiv: <em data-bind="attr: { title: moment(user().lastActivityDate()).format('LLLL') }, text: user().lastActivityDateFormatted, textTimeout: { interval: 30000, observable: user().lastActivityDate }"></em></p>  
                    <p data-bind="visible: user().hasEverChangedPassword">Passwort-Änderung: <em data-bind="attr: { title: moment(user().lastPasswordChangedDate()).format('LLLL') }, text: user().lastPasswordChangedDateFormatted, textTimeout: { interval: 30000, observable: user().lastPasswordChangedDate }"></em></p>
                    <p data-bind="visible: !user().hasEverLoggedIn()">Noch nie angemeldet</p>
                </div>

            </div>
        </div>

        <!-- ko if: user().comment().length -->
        <h5>Notizen</h5>        
        <div class="well well-small">
            <div class="row-fluid">
                <p data-bind="text: user().comment"></p>
            </div>
        </div>
        <!-- /ko -->

        <h5>Optionen</h5>
        <div class="row-fluid">
            <div class="span6">
                <ul class="icons-ul full-height">
                    <li><i class="icon-li icon-wrench"></i> <a href="#" data-bind="click: changePassword">Passwort festlegen</a> </li>
                </ul>
            </div>
        </div>
    </div>

    
    <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
            <ul class="nav pull-right">
                <li>
                    <a href="#" title="Aktualisieren" data-bind="click: refresh"><i class="icon-fixed-width icon-refresh" data-bind="css: { 'icon-spin': isLoading }"></i></a>
                </li>
            </ul>
            <ul class="nav">
                <li>
                    <a href="#" data-bind="click: navigateBack">
                        <i class="icon-fixed-width icon-arrow-left"></i> Zurück</a>
                </li>
                <li>
                    <a href="#" data-bind="click: editUser">
                        <i class="icon-fixed-width icon-edit"></i> Bearbeiten</a>
                </li>
                <li>
                    <a href="#" data-bind="click: deleteUser">
                        <i class="icon-fixed-width icon-remove"></i> Löschen</a>
                </li>
            </ul>
        </div> 
    </div>

</div>