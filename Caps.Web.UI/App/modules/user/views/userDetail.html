<div id="user-detail" class="app-page bottom-fixed-navbar-container">
    
    <div class="container-fluid">
        <h2>Benutzer <span data-bind="text: user().userName"></span></h2>         
        <div class="alert" data-bind="visible: user().isLockedOut">
            <strong>Gesperrt </strong> Der Benutzer wurde <span data-bind="text: moment(user().lastLockoutDate()).fromNow(), attr: { title: moment(user().lastLockoutDate()).format('LLLL') }"></span> aufgrund zu vieler ungültiger Anmelde-Versuche gesperrt.
            <a href="#" data-bind="click: unlockUser"><i class="icon-fixed-width icon-unlock"></i> Sperrung aufheben</a>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row-fluid" data-bind="visible: user().comment().length">
            <h6>Notizen</h6>
            <p data-bind="text: user().comment"></p>
        </div>

        <h6>Benutzerdaten</h6>
        <div class="row-fluid">
            <div class="span6">
                <p>Erstellt: <em data-bind="attr: { title: moment(user().creationDate()).format('LLLL') }, text: moment(user().creationDate()).fromNow()"></em></p>      
                <p>Letzte Anmeldung: <em data-bind="attr: { title: moment(user().lastLoginDate()).format('LLLL') }, text: user().lastLoginDateFormatted()"></em></p>  
                <p>Zuletzt aktiv: <em data-bind="attr: { title: moment(user().lastActivityDate()).format('LLLL') }, text: user().lastActivityDateFormatted"></em></p>  
                <p>Passwort-Änderung: <em data-bind="attr: { title: moment(user().lastPasswordChangedDate()).format('LLLL') }, text: user().lastPasswordChangedDateFormatted"></em></p>
            </div>

            <div class="span6">
                <p>Email: <a data-bind="text: user().email, attr: { href: 'mailto:' + user().email() }"></a></p>
                <p data-bind="visible: user().roles().length">Rollen: <em><!-- ko foreach: user().roles --><span data-bind="text: $data + (($index < $parent.user().roles().length) ? ', ' : '')"></span><!-- /ko --></em></p>                
                <p>Derzeit online: <em data-bind="text: user().isOnline() ? 'Ja' : 'Nein'"></em></p>
                <p>Derzeit gesperrt: <em data-bind="text: user().isLockedOut() ? 'Ja' : 'Nein'"></em></p>
            </div>
        </div>

        <div class="row-fluid">
            <div class="span6">
                <h6>Optionen</h6>
                <ul class="unstyled">
                    <li>
                        <a href="#" data-bind="click: changePassword">Passwort festlegen</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    
    <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
            <ul class="nav pull-right">
                <li>
                    <a href="#" title="Aktualisieren" data-bind="click: refresh"><i class="icon-fixed-width icon-refresh" data-bind="css: { 'icon-spin': isLoading }"></i></a>
                </li>
            </ul>
            <ul class="nav">
                <li>
                    <a href="#" data-bind="click: navigateBack">
                        <i class="icon-fixed-width icon-arrow-left"></i> Zurück zur Liste</a>
                </li>
                <li>
                    <a href="#" data-bind="click: editUser">
                        <i class="icon-fixed-width icon-edit"></i> Benutzer bearbeiten</a>
                </li>
                <li>
                    <a href="#" data-bind="click: deleteUser">
                        <i class="icon-fixed-width icon-remove"></i> Benutzer löschen</a>
                </li>
            </ul>
        </div> 
    </div>

</div>